<table class="index sortable" data-sortable-link="<%= update_positions_admin_product_parts_path(@product) %>">
  <thead>
  	<tr>
      <th><!--- handle line to sort --></th>
  	  <th><%= t('spree.sku') %></th>
  		<th><%= t('spree.name') %></th>
  		<th><%= t('spree.options') %></th>
  		<th><%= t('spree.qty') %></th>
      <th><!--- actions --></th>
  	</tr>
  </thead>
  <tbody>
    <% parts.each_with_index do |part, index| %>
      <tr id="<%= dom_id(part, :sel)%>">
        <td>
          <% if can? :update_positions, Spree::AssembliesPart %>
            <span class="handle"></span>
          <% end %>
        </td>
        <td><%= part.sku %></td>
        <td><%= part.product.name %></td>
        <td><%= variant_options part %></td>
        <td><%= text_field_tag :count, @product.count_of(part), id: "count-#{index+1}" %></td>
  	    <td class="actions">
          <%= link_to_with_icon(
            'edit',
            t('spree.actions.edit'),
            set_count_admin_product_part_url(@product, part),
            :class => "set_count_admin_product_part_link save-line-item") %>

          <%= link_to_with_icon(
            'delete',
            t('spree.actions.delete'),
            remove_admin_product_part_url(@product, part),
            class: "remove_admin_product_part_link delete-line-item") %>
  	    </td>
      </tr>
    <% end %>
    <% if parts.empty? %>
     <tr><td colspan="5"><%= t('spree.none') %>.</td></tr>
    <% end %>
  </tbody>
</table>

<%= javascript_tag do %>
$(document).ready(function() {
  subscribe_product_part_links();
  Spree.SortableTable.refresh();
});
<% end if request.xhr? %>
